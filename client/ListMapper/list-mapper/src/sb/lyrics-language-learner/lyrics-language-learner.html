<template>
  <require from='../sidebar/sidebar'></require>

  <!-- Sidebar with translations -->
  <sidebar
    position="bottom"
    trigger=".lyrics-word"
    on-sidebar-close.bind="resetTextarea"
    on-sidebar-open.bind="onSidebarOpen"
  >
    <div class="sidebar-content">
      <h6
        class="sidebar-header"
        slot="sidebar-content"
        innerhtml.bind="sidebarLyricSentence"
        click.delegate="translateHeaderWord($event)"
      ></h6>

      <div ref="sidebarBody" class="sidebar-body">
        <div class="translation-container">
          <div class="original">
            <label class="label-top">
              Original
              <textarea class="original-text" value.bind="sidebarLyricWord"></textarea>
            </label>
          </div>

          <div class="translation">
            Translation: ${sidebarLyricTranslation}
          </div>


        </div>

        <label class="label-top">
          <span class="label-text">Comment</span>
          <textarea ref="commentRef" class="comment-textarea" autofocus></textarea>
        </label>
      </div>

      <div class="sidebar-footer">
        <button class="btn save-changes" click.delegate="saveChanges()">Update</button>
        <div class="sidebar-error">
          ${isDuplicatedVocabulary ? 'dup' : ''}
        </div>
      </div>
    </div>
  </sidebar>

  <!-- Lyrics container -->
  <div class="lyrics-container" mouseup.delegate="updateSelection()">
    <div class="lyrics-line" repeat.for="[lineNumber, lyrics] of lyricsMap">
      <div class="lyrics-line-number">${lineNumber}</div>
      <div class="lyrics-text">
        <div class="lyrics-original">
          <span class="lyrics-word" repeat.for="word of lyrics.original">
            ${word}
          </span>
        </div>
        <div class="lyrics-translation">
          <span repeat.for="word of lyrics.translation">
            ${word}
          </span>
        </div>
      </div>
    </div>
  </div>
</template>

<template>
  <require from='../sidebar/sidebar'></require>
  <require from='../../resources/attributes/tooltip'></require>

  <button class="btn btn-outline-secondary" click.delegate="listSongs()">List song with lyrics</button>
  <button class="btn btn-outline-secondary" click.delegate="getSongWithLyrics()">Get song with lyrics</button>
  <button class="btn btn-outline-secondary" click.delegate="saveSongWithLyrics()">Save song with lyrics</button>

  <div class="song-list-container">
    <button
      repeat.for="song of songs"
      class="btn btn-outline-secondary song"
      click.delegate="changeSong(song.id)"
    >
      ${song.name}
    </button>
  </div>

  <div class="page-container">
    <!-- Lyrics container -->
    <div class="lyrics-container" mouseup.delegate="updateSelection()">
      <div class="lyrics-line" repeat.for="[lineNumber, lyrics] of lyricsMap">
        <div class="lyrics-line-number">${lineNumber}</div>
        <div class="lyrics-text">
          <div class="lyrics-original">
            <span tooltip="text: loading...; on-appear.bind: updateWithDatabaseTranslation" class="lyrics-word" repeat.for="word of lyrics.original">
              ${word}
            </span>
          </div>
          <div class="lyrics-translation">
            <span repeat.for="word of lyrics.translation">
              ${word}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Video container -->
    <div class="video-container">
      <!-- <iframe width="420" height="315" src="https://www.youtube.com/embed/cS-IiArGmcU">
        </iframe> -->
      Video

      <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
      <div id="player"></div>

      <script>

      </script>
    </div>
  </div>

  <!-- Sidebar with translations -->
  <sidebar
    position="bottom"
    trigger="lyrics-word"
    on-sidebar-close.bind="resetTextarea"
    on-sidebar-open.bind="onSidebarOpen"
  >
    <div class="sidebar-content">
      <h6
        class="sidebar-header"
        slot="sidebar-content"
        innerhtml.bind="sidebarLyricSentence"
        click.delegate="translateHeaderWord($event)"
      ></h6>

      <div ref="sidebarBody" class="sidebar-body">
        <div class="translation-container">
          <div class="original">
            <div role="label" class="label-top">
              <div class="label-header">
                <div class="label-text">Original</div>
                <button class="btn btn-sm btn-outline-secondary btn-copy" click.delegate="copyTextarea()">Copy text</button>
              </div>
              <textarea ref="originalTextarea" class="original-text" value.bind="sidebarLyricWord"></textarea>
            </div>
          </div>

          <div class="translation">
            <div role="label" class="label-top">
              <div class="label-header">
                <div class="label-text">Translation</div>
                <div class="translation-options">
                  <button class="btn btn-sm btn-outline-secondary translation-option">
                    Watson
                  </button>
                  <button class="btn btn-sm btn-outline-secondary translation-option">
                    Naver
                  </button>
                </div>
              </div>
              <div class="translation-text">
                ${sidebarLyricTranslation}
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar-history-container">
          <h5>History</h5>
          <div class="sidebar-history">
            <div class="history-original">orig</div>
            <div class="history-translation">trans</div>
          </div>
        </div>

        <label class="label-top">
          <span class="label-text">Comment</span>
          <textarea ref="commentRef" class="comment-textarea" autofocus></textarea>
        </label>
      </div>

      <div class="sidebar-footer">
        <button class="btn save-changes" click.delegate="saveChanges()">Update</button>
        <div class="sidebar-error">
          ${isDuplicatedVocabulary ? 'dup' : ''}
        </div>
      </div>
    </div>
  </sidebar>

</template>
